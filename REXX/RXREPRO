/* REXX */
/* COPY DS1 TO DS2 WITH A REXX EXEC */
ARG DSN1 DSN2 DISP
IF SUBSTR(DSN1,1,1) ¬= "'" THEN
  DSN1 = "'"DSN1"'"
IF SUBSTR(DSN2,1,1) ¬= "'" THEN
  DSN2 = "'"DSN2"'"
DSN1_FIRST = SYSDSN(DSN1)
DSN2_FIRST = SYSDSN(DSN2)
IF DSN1_FIRST /= "OK" THEN  DSN1 = STRIP(TRANSLATE(DSN1,"","'"))
IF DSN2_FIRST /= "OK" THEN  DSN2 = STRIP(TRANSLATE(DSN2,"","'"))
DSN1_SECOND = SYSDSN(DSN1)
DSN2_SECOND = SYSDSN(DSN2)
IF (DSN1_FIRST /= "OK" ) & (DSN1_SECOND /= "OK") THEN DO
  IF SYSVAR(SYSENV) = "FORE" THEN DO
    SECRC = "TSA512E: PROVIDED DATASET INVALID" DSN1
    ADDRESS ISPEXEC "VPUT SECRC PROFILE"
    EXIT 8
  END
END
IF (DSN2_FIRST /= "OK" ) & (DSN2_SECOND /= "OK") THEN DO
  IF SYSVAR(SYSENV) = "FORE" THEN DO
    SECRC = "TSA512E: PROVIDED DATASET INVALID" DSN2
    ADDRESS ISPEXEC "VPUT SECRC PROFILE"
    EXIT 8
  END
END
IF (DSN2_FIRST /= "OK" ) & (DSN2_SECOND /= "OK") THEN DO
END
TRACE OFF
SAY "RXREPRO: RESOLVED DSNS ARE:"
SAY DSN1 DSN2
IF DISP = " " THEN DISP = "SHR"
/******************************************************************/
/* IF DISP = MOD AND A PDS IS THE OUTPUT DSN USE RXAPPEND NOT THIS*/
/******************************************************************/
ADDRESS TSO "ALLOC DDN(INFILE) DSN("DSN1") SHR REUS"
ADDRESS TSO "ALLOC DDN(OUTFILE) DSN("DSN2") "DISP" REUS"
ADDRESS MVS "EXECIO * DISKR INFILE (FINIS STEM LINE.)"
OUTNUM = LINE.0
ADDRESS MVS "EXECIO "OUTNUM" DISKW OUTFILE (FINIS STEM LINE.)"
ADDRESS TSO " FREE DDN(INFILE)  "
ADDRESS TSO " FREE DDN(OUTFILE) "
IF SYSVAR(SYSENV) = "FORE" THEN DO
  secrc = "TSA513I: Data copied successfully."
  ADDRESS ISPEXEC "VPUT SECRC PROFILE"
  EXIT 0
END
